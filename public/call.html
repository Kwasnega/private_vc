<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Call in Progress â€” Kay & Cathy</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="style.css">
</head>
<body class="call-page">
  <!-- Floating hearts background -->
  <div class="floating-hearts" id="floatingHearts"></div>

  <!-- Subtle heart decoration -->
  <div class="corner-heart">ğŸ’œ</div>

  <!-- Join sound (plays once when remote stream connects) -->
  <audio id="joinSound" preload="auto"></audio>

  <!-- Toast notification container -->
  <div id="toastContainer"></div>

  <!-- Connection status -->
  <div class="connection-status" id="connectionStatus">
    <span class="status-dot"></span>
    <span class="status-text">Connecting...</span>
  </div>

  <!-- Video container -->
  <div class="video-container">
    <!-- Heart burst container (one-time animation on connection) -->
    <div id="heartBurst"></div>
    
    <!-- Remote video (Cathy's or Kay's depending on role) -->
    <div class="video-wrapper remote-video-wrapper">
      <video id="remoteVideo" autoplay playsinline disablepictureinpicture controlslist="nodownload noplaybackrate"></video>
      <div class="avatar-circle" id="remoteAvatar">E</div>
      <div class="video-label" id="remoteLabel">Waiting...</div>
      <div class="video-placeholder" id="remotePlaceholder">
        <div class="placeholder-icon">ğŸ‘¤</div>
        <div class="placeholder-text">Waiting for connection...</div>
      </div>
    </div>

    <!-- Local video (your camera) -->
    <div class="video-wrapper local-video-wrapper">
      <video id="localVideo" autoplay muted playsinline disablepictureinpicture controlslist="nodownload noplaybackrate"></video>
      <div class="avatar-circle" id="localAvatar">K</div>
      <div class="video-label" id="localLabel">You</div>
    </div>
  </div>

  <!-- Drawing Canvas -->
  <canvas id="drawCanvas"></canvas>

  <!-- Call controls -->
  <div class="controls-container">
    <button class="control-btn" id="toggleMic" title="Toggle Microphone">
      <span class="control-icon">ğŸ¤</span>
    </button>

    <button class="control-btn" id="toggleCamera" title="Toggle Camera">
      <span class="control-icon">ğŸ“¹</span>
    </button>

    <button class="control-btn" id="switchCamera" title="Switch Camera">
      <span class="control-icon">ğŸ”„</span>
    </button>

    <button class="control-btn pulse-btn" id="sendPulse" title="Send Pulse (Long Press)">
      <span class="control-icon">ğŸ’œ</span>
    </button>

    <button class="control-btn" id="toggleDraw" title="Toggle Drawing">
      <span class="control-icon">âœï¸</span>
    </button>

    <button class="control-btn" id="clearDraw" title="Clear Drawing" style="display: none;">
      <span class="control-icon">ğŸ—‘ï¸</span>
    </button>

    <button class="control-btn" id="toggleMoodLighting" title="Mood Lighting">
      <span class="control-icon">ğŸŒˆ</span>
    </button>

    <button class="control-btn" id="gamesBtn" title="Games">
      <span class="control-icon">ğŸ®</span>
    </button>

    <button class="control-btn" id="reactionsBtn" title="Send Reaction">
      <span class="control-icon">â¤ï¸</span>
    </button>

    <button class="control-btn" id="watchPartyBtn" title="Watch Party">
      <span class="control-icon">ğŸ¬</span>
    </button>

    <button class="control-btn" id="notesBtn" title="Notes">
      <span class="control-icon">ğŸ“</span>
    </button>

    <button class="control-btn" id="togglePortal" title="Portal Effect">
      <span class="control-icon">ğŸŒ€</span>
    </button>

    <button class="control-btn end-call-btn" id="endCall" title="End Call">
      <span class="control-icon">ğŸ“µ</span>
    </button>
  </div>

  <!-- Reaction Particles Container -->
  <div id="reactionParticles"></div>

  <!-- Games Modal -->
  <div id="gamesModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Mini Games</h2>
        <button class="modal-close" id="closeGames">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="games-menu">
          <button class="game-btn" data-game="rps">ğŸª¨ Rock Paper Scissors</button>
          <button class="game-btn" data-game="emoji">ğŸ˜Š Emoji Race</button>
          <button class="game-btn" data-game="memory">ğŸƒ Memory Flip</button>
        </div>
        <div id="gameArea" style="display: none;"></div>
      </div>
    </div>
  </div>

  <!-- Reactions Menu -->
  <div id="reactionsMenu" class="reactions-menu" style="display: none;">
    <button class="reaction-option" data-reaction="heart">â¤ï¸</button>
    <button class="reaction-option" data-reaction="star">â­</button>
    <button class="reaction-option" data-reaction="sparkle">âœ¨</button>
    <button class="reaction-option" data-reaction="clap">ğŸ‘</button>
  </div>

  <!-- Watch Party Panel -->
  <div id="watchPartyPanel" class="watch-party-panel" style="display: none;">
    <div class="panel-header">
      <h3>Watch Party</h3>
      <button class="panel-close" id="closeWatchParty">Ã—</button>
    </div>
    <div class="panel-body">
      <input type="text" id="watchUrl" placeholder="Paste YouTube or MP4 video URL" />
      <div class="panel-controls">
        <button id="loadVideo">Load</button>
        <button id="playPauseVideo" disabled>Play</button>
      </div>
      <video id="partyPlayer" controls crossorigin style="width: 100%; margin-top: 10px; display: none;"></video>
      <div id="youtubePlayer" style="display: none;"></div>
    </div>
  </div>

  <!-- Notes Panel -->
  <div id="notesPanel" class="notes-panel" style="display: none;">
    <div class="panel-header">
      <h3>Shared Notes</h3>
      <button class="panel-close" id="closeNotes">Ã—</button>
    </div>
    <div class="panel-body">
      <div class="notes-input-container">
        <input type="text" id="noteInput" placeholder="Add a note (120 chars max)" maxlength="120" />
        <button id="addNote">Add</button>
      </div>
      <ul id="notesList"></ul>
      <div class="notes-actions">
        <button id="exportNotes">Export</button>
      </div>
    </div>
  </div>

  <!-- Compliment Banner -->
  <div id="complimentBanner" class="compliment-banner"></div>

  <!-- Background gradient -->
  <div class="gradient-bg"></div>

  <script src="script.js"></script>
</body>
</html>